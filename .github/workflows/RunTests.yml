name: Run Tests
on:
  workflow_dispatch:    
jobs:    
  build:
    runs-on: ubuntu-latest    
    steps:
    - name: Check out code
      uses: actions/checkout@v1
    - name: Setup .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 5.0.103
    - name: Build with dotnet
      run: |
        dotnet build webtest1/webtest1.csproj 
        dotnet build webtest1.Tests/webtest1.Tests.csproj        
    - name: Install report generator
      run: dotnet tool install dotnet-reportgenerator-globaltool --version 4.8.12 --tool-path $(DOTNET_ROOT)/tools
    - name: Build with dotnet
      run: |
        dotnet test /p:CollectCoverage=true /p:CoverletOutput=BuildReports/Coverage/ /p:CoverletOutputFormat=cobertura 
        reportgenerator -reports:BuildReports/Coverage/coverage.cobertura.xml -targetdir:BuildReports/Coverage -reporttypes:"HTML;HTMLSummary"
    

